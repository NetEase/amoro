(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d2b7c9e"],{"1be4":function(e,t,a){var c=a("d066");e.exports=c("document","documentElement")},"37e8":function(e,t,a){var c=a("83ab"),o=a("aed9"),l=a("9bf2"),n=a("825a"),r=a("fc6a"),i=a("df75");t.f=c&&!o?Object.defineProperties:function(e,t){n(e);var a,c=r(t),o=i(t),s=o.length,u=0;while(s>u)l.f(e,a=o[u++],c[a]);return e}},"37f0":function(e,t,a){},"44d22":function(e,t,a){var c=a("b622"),o=a("7c73"),l=a("9bf2").f,n=c("unscopables"),r=Array.prototype;void 0==r[n]&&l(r,n,{configurable:!0,value:o(null)}),e.exports=function(e){r[n][e]=!0}},"4ed8":function(e,t,a){},5606:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"g",(function(){return i})),a.d(t,"f",(function(){return s})),a.d(t,"e",(function(){return u}));var c=a("b32d");function o(){return c["a"].get("ams/v1/catalog/metastore/types")}function l(e){return c["a"].get("ams/v1/catalogs/"+e)}function n(e){return c["a"].delete("ams/v1/catalogs/"+e)}function r(e){return c["a"].get(`ams/v1/catalogs/${e}/delete/check`)}function i(e){const{isCreate:t,name:a}=e;return delete e.isCreate,t?c["a"].post("ams/v1/catalogs",{...e}):c["a"].put("ams/v1/catalogs/"+a,{...e})}function s(){return c["a"].get("ams/v1/settings/system")}function u(){return c["a"].get("ams/v1/settings/containers")}},5738:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"j",(function(){return n})),a.d(t,"i",(function(){return r})),a.d(t,"d",(function(){return i})),a.d(t,"m",(function(){return s})),a.d(t,"h",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"k",(function(){return b})),a.d(t,"c",(function(){return p})),a.d(t,"e",(function(){return f})),a.d(t,"f",(function(){return O})),a.d(t,"n",(function(){return j})),a.d(t,"l",(function(){return g}));var c=a("b32d");function o(){return c["a"].get("ams/v1/catalogs")}function l(e){const{catalog:t,keywords:a}=e;return c["a"].get(`ams/v1/catalogs/${t}/databases`,{params:{keywords:a}})}function n(e){const{catalog:t,db:a,keywords:o}=e;return c["a"].get(`ams/v1/catalogs/${t}/databases/${a}/tables`,{params:{keywords:o}})}function r({catalog:e="",db:t="",table:a="",token:o=""}){return c["a"].get(`ams/v1/tables/catalogs/${e}/dbs/${t}/tables/${a}/details`,{params:{token:o}})}function i({catalog:e="",db:t="",table:a=""}){return c["a"].get(`ams/v1/tables/catalogs/${e}/dbs/${t}/tables/${a}/hive/details`)}function s({catalog:e="",db:t="",table:a=""}){return c["a"].get(`ams/v1/tables/catalogs/${e}/dbs/${t}/tables/${a}/upgrade/status`)}function u(e){const{catalog:t,db:a,table:o,page:l,pageSize:n,token:r}=e;return c["a"].get(`ams/v1/tables/catalogs/${t}/dbs/${a}/tables/${o}/partitions`,{params:{page:l,pageSize:n,token:r}})}function d(e){const{catalog:t,db:a,table:o,partition:l,page:n,pageSize:r,token:i}=e;return c["a"].get(`ams/v1/tables/catalogs/${t}/dbs/${a}/tables/${o}/partitions/${l}/files`,{params:{page:n,pageSize:r,token:i}})}function b(e){const{catalog:t,db:a,table:o,page:l,pageSize:n,token:r}=e;return c["a"].get(`ams/v1/tables/catalogs/${t}/dbs/${a}/tables/${o}/transactions`,{params:{page:l,pageSize:n,token:r}})}function p(e){const{catalog:t,db:a,table:o,transactionId:l,page:n,pageSize:r,token:i}=e;return c["a"].get(`ams/v1/tables/catalogs/${t}/dbs/${a}/tables/${o}/transactions/${l}/detail`,{params:{page:n,pageSize:r,token:i}})}function f(e){const{catalog:t,db:a,table:o,page:l,pageSize:n,token:r}=e;return c["a"].get(`ams/v1/tables/catalogs/${t}/dbs/${a}/tables/${o}/operations`,{params:{page:l,pageSize:n,token:r}})}function O(e){const{catalog:t,db:a,table:o,page:l,pageSize:n,token:r}=e;return c["a"].get(`ams/v1/tables/catalogs/${t}/dbs/${a}/tables/${o}/optimize`,{params:{page:l,pageSize:n,token:r}})}function j({catalog:e="",db:t="",table:a="",properties:o={},pkList:l=[]}){return c["a"].post(`ams/v1/tables/catalogs/${e}/dbs/${t}/tables/${a}/upgrade`,{properties:o,pkList:l})}function g(){return c["a"].get("ams/v1/upgrade/properties")}},"69b2":function(e,t,a){"use strict";a("c411")},7371:function(e,t,a){"use strict";a("8983")},"7c73":function(e,t,a){var c,o=a("825a"),l=a("37e8"),n=a("7839"),r=a("d012"),i=a("1be4"),s=a("cc12"),u=a("f772"),d=">",b="<",p="prototype",f="script",O=u("IE_PROTO"),j=function(){},g=function(e){return b+f+d+e+b+"/"+f+d},m=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){var e,t=s("iframe"),a="java"+f+":";return t.style.display="none",i.appendChild(t),t.src=String(a),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},h=function(){try{c=new ActiveXObject("htmlfile")}catch(t){}h="undefined"!=typeof document?document.domain&&c?m(c):v():m(c);var e=n.length;while(e--)delete h[p][n[e]];return h()};r[O]=!0,e.exports=Object.create||function(e,t){var a;return null!==e?(j[p]=o(e),a=new j,j[p]=null,a[O]=e):a=h(),void 0===t?a:l.f(a,t)}},8552:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var c=a("7a23"),o=a("47e2");function l(){const{t:e}=Object(o["b"])(),t=Object(c["computed"])(()=>e("catalog")).value,a=Object(c["computed"])(()=>e("databaseName")).value,l=Object(c["computed"])(()=>e("tableName")).value,n=Object(c["computed"])(()=>e("optimzerGroup")).value,r=Object(c["computed"])(()=>e("resourceGroup")).value,i=Object(c["computed"])(()=>e("parallelism")).value,s=Object(c["computed"])(()=>e("username")).value,u=Object(c["computed"])(()=>e("password")).value,d=Object(c["computed"])(()=>e("database",2)).value,b=Object(c["computed"])(()=>e("table",2)).value;return{selectPh:e("selectPlaceholder"),inputPh:e("inputPlaceholder"),selectClPh:e("selectPlaceholder",{selectPh:t}),selectDBPh:e("selectPlaceholder",{selectPh:a}),inputDBPh:e("inputPlaceholder",{inputPh:a}),inputClPh:e("inputPlaceholder",{inputPh:t}),inputTNPh:e("inputPlaceholder",{inputPh:l}),selectOptGroupPh:e("inputPlaceholder",{inputPh:n}),resourceGroupPh:e("inputPlaceholder",{inputPh:r}),parallelismPh:e("inputPlaceholder",{inputPh:i}),usernamePh:e("inputPlaceholder",{inputPh:s}),passwordPh:e("inputPlaceholder",{inputPh:u}),filterDBPh:e("filterPlaceholder",{inputPh:d}),filterTablePh:e("filterPlaceholder",{inputPh:b})}}},8983:function(e,t,a){},adb5:function(e,t,a){"use strict";a.r(t);a("cd17");var c=a("ed3b"),o=(a("06f4"),a("fc25")),l=a("7a23"),n=a("5738"),r=(a("3b18"),a("f64c")),i=(a("caad"),a("d9e2"),a("5606")),s=a("47e2"),u=a("a878"),d=a("d257"),b=a("8552");const p={class:"config-properties"},f={key:0},O={class:"config-header g-flex"},j={class:"td g-flex-ac"},g={class:"td g-flex-ac bd-left"},m=Object(l["createTextVNode"])("+");var v=Object(l["defineComponent"])({__name:"Properties",props:{propertiesObj:null,isEdit:{type:Boolean}},setup(e,{expose:t}){const a=e,{t:c}=Object(s["b"])(),o=Object(l["shallowReactive"])([{dataIndex:"key",title:c("key"),width:284,ellipsis:!0},{dataIndex:"value",title:c("value"),ellipsis:!0}]),n=Object(l["ref"])(),r=Object(l["reactive"])({data:[]}),i=Object(l["reactive"])(Object(b["a"])()),v=Object(l["computed"])(()=>a.isEdit);function h(){r.data.length=0,Object.keys(a.propertiesObj).forEach(e=>{r.data.push({key:e,value:a.propertiesObj[e],uuid:Object(d["g"])()})})}function k(e){const t=r.data.indexOf(e);-1!==t&&r.data.splice(t,1)}function y(){r.data.push({key:"",value:"",uuid:Object(d["g"])()})}return Object(l["watch"])(()=>a.propertiesObj,()=>{h()},{immediate:!0,deep:!0}),t({getProperties(){return n.value.validateFields().then(()=>{const e={};return r.data.forEach(t=>{e[t.key]=t.value}),Promise.resolve(e)}).catch(()=>!1)}}),Object(l["onMounted"])(()=>{}),(e,t)=>{const a=Object(l["resolveComponent"])("a-input"),c=Object(l["resolveComponent"])("a-form-item"),s=Object(l["resolveComponent"])("a-form"),d=Object(l["resolveComponent"])("a-button"),b=Object(l["resolveComponent"])("a-table");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",p,[Object(l["unref"])(v)?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",f,[Object(l["createElementVNode"])("div",O,[Object(l["createElementVNode"])("div",j,Object(l["toDisplayString"])(e.$t("key")),1),Object(l["createElementVNode"])("div",g,Object(l["toDisplayString"])(e.$t("value")),1)]),Object(l["createVNode"])(s,{ref_key:"propertiesFormRef",ref:n,model:r,class:"g-mt-12"},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(r.data,(t,o)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:"config-row",key:t.uuid},[Object(l["createVNode"])(c,{name:["data",o,"key"],rules:[{required:!0,message:""+e.$t(i.inputPh)}],class:"g-mr-8"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{value:t.key,"onUpdate:value":e=>t.key=e,style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"]),Object(l["createVNode"])(c,{name:["data",o,"value"],rules:[{required:!0,message:""+e.$t(i.inputPh)}]},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{value:t.value,"onUpdate:value":e=>t.value=e,style:{width:"100%"}},null,8,["value","onUpdate:value"])]),_:2},1032,["name","rules"]),Object(l["createVNode"])(Object(l["unref"])(u["a"]),{class:"icon-close",onClick:e=>k(t)},null,8,["onClick"])]))),128))]),_:1},8,["model"]),Object(l["createVNode"])(d,{class:"config-btn",onClick:y},{default:Object(l["withCtx"])(()=>[m]),_:1})])):Object(l["createCommentVNode"])("",!0),Object(l["unref"])(v)?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createBlock"])(b,{key:1,rowKey:"uuid",columns:Object(l["unref"])(o),"data-source":r.data,pagination:!1},null,8,["columns","data-source"]))])}}});a("7371");const h=v;var k=h,y=a("6c02");const C={class:"detail-wrap"},E={class:"detail-content-wrap"},N={class:"content-wrap"},B={class:"header"},w={key:1,class:"config-value"},$={key:1},V=Object(l["createTextVNode"])("Mixed Hive"),x=Object(l["createTextVNode"])("Iceberg"),P=Object(l["createTextVNode"])("Mixed Iceberg"),_={class:"header"},S=["onClick"],I={class:"header"},D={key:1,class:"config-value"},T={key:1,class:"config-value"},U={key:1,class:"config-value"},L={key:2},R=["onClick","title"],M={class:"header"},A={key:0,class:"footer-btn"},F={key:1,class:"footer-btn"};var z=Object(l["defineComponent"])({__name:"Detail",props:{isEdit:{type:Boolean}},emits:["updateEdit","updateCatalogs"],setup(e,{emit:t}){const a=e,{t:o}=Object(s["b"])(),n=Object(y["d"])(),u=Object(l["reactive"])(Object(b["a"])()),d=Object(l["ref"])(""),p=Object(l["computed"])(()=>a.isEdit),f=Object(l["computed"])(()=>"/ams/v1/files"),O=Object(l["computed"])(()=>{var e;const t=((null===(e=n.query)||void 0===e?void 0:e.catalogname)||"").toString();return"new catalog"===decodeURIComponent(t)}),j=Object(l["computed"])(()=>"hive"===K.catalog.type),g=Object(l["computed"])(()=>"ams"===K.catalog.type),m=Object(l["ref"])(!1),v=Object(l["ref"])(),h=Object(l["ref"])(),z={MIXED_HIVE:"MIXED_HIVE",ICEBERG:"ICEBERG",MIXED_ICEBERG:"MIXED_ICEBERG"},G={"hadoop.core.site":"core-site.xml","hadoop.hdfs.site":"hdfs-site.xml","hive.site":"hive-site.xml"},q={storageConfig:{"hadoop.core.site":"","hadoop.hdfs.site":""},authConfig:{"auth.kerberos.keytab":"","auth.kerberos.krb5":""}},K=Object(l["reactive"])({catalog:{name:"",type:"ams"},tableFormat:"",storageConfig:{},authConfig:{},properties:{},storageConfigArray:[],authConfigArray:[]}),X=Object(l["reactive"])([{label:"SIMPLE",value:"SIMPLE"},{label:"KERBEROS",value:"KERBEROS"}]),H={"hadoop.core.site":"Hadoop core-site","hadoop.hdfs.site":"Hadoop hdfs-site","hive.site":"Hadoop hive-site"},J={"auth.kerberos.keytab":"Kerberos Keytab","auth.kerberos.krb5":"Kerberos Krb5"};Object(l["watch"])(()=>n.query,e=>{e&&Z()},{immediate:!0,deep:!0});const W=Object(l["reactive"])([]);function Z(){ee()}async function Q(){const e=await Object(i["d"])();(e||[]).forEach(e=>{W.push({label:e.display,value:e.value})}),Y()}function Y(){d.value=(W.find(e=>e.value===K.catalog.type)||{}).label}async function ee(){try{m.value=!0;const{catalogname:e,type:t}=n.query;if(!e)return;if(O.value)K.catalog.name="",K.catalog.type=t||"ams",K.tableFormat=z.MIXED_ICEBERG,K.authConfig={...q.authConfig},K.storageConfig={...q.storageConfig},K.properties={},K.storageConfigArray.length=0,K.authConfigArray.length=0;else{const t=await Object(i["c"])(e);if(!t)return;const{name:a,type:c,tableFormatList:o,storageConfig:l,authConfig:n,properties:r}=t;K.catalog.name=a,K.catalog.type=c,K.tableFormat=o.join(""),K.authConfig=n,K.storageConfig=l,K.properties=r||{},K.storageConfigArray.length=0,K.authConfigArray.length=0}Y();const{storageConfig:a,authConfig:c}=K;Object.keys(a).forEach(e=>{const t=["hadoop.core.site","hadoop.hdfs.site"];if(j.value&&t.push("hive.site"),t.includes(e)){var c,o,l;const t={key:e,label:H[e],value:null===(c=a[e])||void 0===c?void 0:c.fileName,fileName:null===(o=a[e])||void 0===o?void 0:o.fileName,fileUrl:null===(l=a[e])||void 0===l?void 0:l.fileUrl,fileId:"",fileList:[],uploadLoading:!1,isSuccess:!1};K.storageConfigArray.push(t)}}),Object.keys(c).forEach(e=>{if(["auth.kerberos.keytab","auth.kerberos.krb5"].includes(e)){var t,a,o;const l={key:e,label:J[e],value:null===(t=c[e])||void 0===t?void 0:t.fileName,fileName:null===(a=c[e])||void 0===a?void 0:a.fileName,fileUrl:null===(o=c[e])||void 0===o?void 0:o.fileUrl,fileId:"",fileList:[],uploadLoading:!1,isSuccess:!1};K.authConfigArray.push(l)}})}catch(e){}finally{m.value=!1}}function te(){if(K.tableFormat=j.value?z.MIXED_HIVE:g.value?z.MIXED_ICEBERG:z.ICEBERG,!O.value)return;const e=K.storageConfigArray.findIndex(e=>"hive.site"===e.key);if(j.value){if(e>-1)return;K.storageConfigArray.push({key:"hive.site",label:H["hive.site"],value:"",fileName:"",fileUrl:"",fileId:"",fileList:[],uploadLoading:!1,isSuccess:!1}),K.storageConfig["hive.site"]=""}else e>-1&&(K.storageConfigArray.splice(e,1),delete K.storageConfig["hive.site"])}function ae(){t("updateEdit",!0)}async function ce(){const e=await Object(i["a"])(K.catalog.name);e?ie():c["a"].confirm({title:o("cannotDeleteModalTitle"),content:o("cannotDeleteModalContent"),wrapClassName:"not-delete-modal"})}async function oe(e,t){return t?/^[a-zA-Z][\w-]*$/.test(t)?Promise.resolve():Promise.reject(new Error(o("invalidInput"))):Promise.reject(new Error(o("inputPlaceholder")))}function le(){const{storageConfig:e,authConfig:t,storageConfigArray:a,authConfigArray:c}=K;Object.keys(t).forEach(e=>{if(["auth.kerberos.keytab","auth.kerberos.krb5"].includes(e)){const a=(c.find(t=>t.key===e)||{}).fileId;t[e]=a}}),Object.keys(e).forEach(t=>{const c=(a.find(e=>e.key===t)||{}).fileId;e[t]=c})}function ne(){v.value.validateFields().then(async()=>{const{catalog:e,tableFormat:a,storageConfig:c,authConfig:l}=K,n=await h.value.getProperties();n&&(m.value=!0,le(),await Object(i["g"])({isCreate:O.value,...e,tableFormatList:[a],storageConfig:c,authConfig:l,properties:n}).then(()=>{r["a"].success(`${o("save")} ${o("success")}`),t("updateEdit",!1,{catalogName:e.name,catalogType:e.type}),ee(),v.value.resetFields()}).catch(()=>{r["a"].error(`${o("save")} ${o("failed")}`)}).finally(()=>{m.value=!1}))}).catch(()=>{})}function re(){v.value.resetFields(),t("updateEdit",!1),ee()}async function ie(){c["a"].confirm({title:o("deleteCatalogModalTitle"),onOk:async()=>{await Object(i["b"])(K.catalog.name),r["a"].success(`${o("remove")} ${o("success")}`),t("updateEdit",!1,{})}})}function se(e,t,a){try{if("uploading"===e.file.status?t.uploadLoading=!0:t.uploadLoading=!1,"done"===e.file.status){const{code:c}=e.file.response;if(200!==c)throw new Error("failed");const{url:l,id:n}=e.file.response.result;t.isSuccess=!0,t.fileName="STORAGE"===a?G[t.key]:e.file.name,t.fileUrl=l,t.fileId=n,r["a"].success(`${e.file.name} ${o("uploaded")} ${o("success")}`)}else"error"===e.file.status&&(t.isSuccess=!1,r["a"].error(`${e.file.name} ${o("uploaded")} ${o("failed")}`))}catch(c){r["a"].error(`${o("uploaded")} ${o("failed")}`)}}function ue(e){e&&window.open(e)}return Object(l["onMounted"])(()=>{Q()}),(e,t)=>{const a=Object(l["resolveComponent"])("a-form-item"),c=Object(l["resolveComponent"])("a-input"),o=Object(l["resolveComponent"])("a-select"),n=Object(l["resolveComponent"])("a-radio"),r=Object(l["resolveComponent"])("a-radio-group"),i=Object(l["resolveComponent"])("a-button"),s=Object(l["resolveComponent"])("a-upload"),b=Object(l["resolveComponent"])("a-form"),y=Object(l["resolveComponent"])("u-loading");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",C,[Object(l["createElementVNode"])("div",E,[Object(l["createElementVNode"])("div",N,[Object(l["createVNode"])(b,{ref_key:"formRef",ref:v,model:K,class:"catalog-form"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,null,{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("p",B,Object(l["toDisplayString"])(e.$t("basic")),1)]),_:1}),Object(l["createVNode"])(a,{label:e.$t("name"),name:["catalog","name"],rules:[{required:Object(l["unref"])(p)&&Object(l["unref"])(O),validator:oe}]},{default:Object(l["withCtx"])(()=>[Object(l["unref"])(p)&&Object(l["unref"])(O)?(Object(l["openBlock"])(),Object(l["createBlock"])(c,{key:0,value:K.catalog.name,"onUpdate:value":t[0]||(t[0]=e=>K.catalog.name=e)},null,8,["value"])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",w,Object(l["toDisplayString"])(K.catalog.name),1))]),_:1},8,["label","rules"]),Object(l["createVNode"])(a,{label:e.$t("metastore"),name:["catalog","type"],rules:[{required:Object(l["unref"])(p)&&Object(l["unref"])(O)}]},{default:Object(l["withCtx"])(()=>[Object(l["unref"])(p)&&Object(l["unref"])(O)?(Object(l["openBlock"])(),Object(l["createBlock"])(o,{key:0,value:K.catalog.type,"onUpdate:value":t[1]||(t[1]=e=>K.catalog.type=e),options:W,placeholder:u.selectPh,onChange:te},null,8,["value","options","placeholder"])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",$,Object(l["toDisplayString"])(d.value),1))]),_:1},8,["label","rules"]),Object(l["createVNode"])(a,{label:e.$t("tableFormat"),name:["tableFormat"],rules:[{required:Object(l["unref"])(p)&&Object(l["unref"])(O)}]},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r,{disabled:!Object(l["unref"])(p)||!Object(l["unref"])(O),value:K.tableFormat,"onUpdate:value":t[2]||(t[2]=e=>K.tableFormat=e),name:"radioGroup"},{default:Object(l["withCtx"])(()=>[Object(l["unref"])(j)?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,value:z.MIXED_HIVE},{default:Object(l["withCtx"])(()=>[V]),_:1},8,["value"])):Object(l["createCommentVNode"])("",!0),Object(l["unref"])(g)?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:1,value:z.ICEBERG},{default:Object(l["withCtx"])(()=>[x]),_:1},8,["value"])),Object(l["unref"])(g)?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:2,value:z.MIXED_ICEBERG},{default:Object(l["withCtx"])(()=>[P]),_:1},8,["value"])):Object(l["createCommentVNode"])("",!0)]),_:1},8,["disabled","value"])]),_:1},8,["label","rules"]),Object(l["createVNode"])(a,null,{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("p",_,Object(l["toDisplayString"])(e.$t("storageConfig")),1)]),_:1}),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(K.storageConfigArray,t=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:t.label,label:t.label,class:"g-flex-ac"},{default:Object(l["withCtx"])(()=>[Object(l["unref"])(p)?(Object(l["openBlock"])(),Object(l["createBlock"])(s,{key:0,"file-list":t.fileList,"onUpdate:file-list":e=>t.fileList=e,name:"file",accept:".xml",showUploadList:!1,action:Object(l["unref"])(f),disabled:t.uploadLoading,onChange:e=>se(e,t,"STORAGE")},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(i,{type:"primary",ghost:"",loading:t.uploadLoading,class:"g-mr-12"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.$t("upload")),1)]),_:2},1032,["loading"])]),_:2},1032,["file-list","onUpdate:file-list","action","disabled","onChange"])):Object(l["createCommentVNode"])("",!0),t.isSuccess||t.fileName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:1,class:Object(l["normalizeClass"])(["config-value",{"view-active":!!t.fileUrl}]),onClick:e=>ue(t.fileUrl)},Object(l["toDisplayString"])(t.fileName),11,S)):Object(l["createCommentVNode"])("",!0)]),_:2},1032,["label"]))),128)),Object(l["createVNode"])(a,null,{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("p",I,Object(l["toDisplayString"])(e.$t("authenticationConfig")),1)]),_:1}),Object(l["createVNode"])(a,{label:"Type",name:["authConfig","auth.type"],rules:[{required:Object(l["unref"])(p)}]},{default:Object(l["withCtx"])(()=>[Object(l["unref"])(p)?(Object(l["openBlock"])(),Object(l["createBlock"])(o,{key:0,value:K.authConfig["auth.type"],"onUpdate:value":t[3]||(t[3]=e=>K.authConfig["auth.type"]=e),placeholder:u.selectPh,options:X},null,8,["value","placeholder","options"])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",D,Object(l["toDisplayString"])(K.authConfig["auth.type"]),1))]),_:1},8,["name","rules"]),"SIMPLE"===K.authConfig["auth.type"]?(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:0,label:"Hadoop Username",name:["authConfig","auth.simple.hadoop_username"],rules:[{required:Object(l["unref"])(p)}]},{default:Object(l["withCtx"])(()=>[Object(l["unref"])(p)?(Object(l["openBlock"])(),Object(l["createBlock"])(c,{key:0,value:K.authConfig["auth.simple.hadoop_username"],"onUpdate:value":t[4]||(t[4]=e=>K.authConfig["auth.simple.hadoop_username"]=e)},null,8,["value"])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",T,Object(l["toDisplayString"])(K.authConfig["auth.simple.hadoop_username"]),1))]),_:1},8,["name","rules"])):Object(l["createCommentVNode"])("",!0),"KERBEROS"===K.authConfig["auth.type"]?(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:1,label:"Kerberos Principal",name:["authConfig","auth.kerberos.principal"],rules:[{required:Object(l["unref"])(p)}]},{default:Object(l["withCtx"])(()=>[Object(l["unref"])(p)?(Object(l["openBlock"])(),Object(l["createBlock"])(c,{key:0,value:K.authConfig["auth.kerberos.principal"],"onUpdate:value":t[5]||(t[5]=e=>K.authConfig["auth.kerberos.principal"]=e)},null,8,["value"])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",U,Object(l["toDisplayString"])(K.authConfig["auth.kerberos.principal"]),1))]),_:1},8,["name","rules"])):Object(l["createCommentVNode"])("",!0),"KERBEROS"===K.authConfig["auth.type"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",L,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(K.authConfigArray,t=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:t.label,label:t.label,class:"g-flex-ac"},{default:Object(l["withCtx"])(()=>[Object(l["unref"])(p)?(Object(l["openBlock"])(),Object(l["createBlock"])(s,{key:0,"file-list":t.fileList,"onUpdate:file-list":e=>t.fileList=e,name:"file",accept:"auth.kerberos.keytab"===t.key?".keytab":".conf",showUploadList:!1,action:Object(l["unref"])(f),disabled:t.uploadLoading,onChange:e=>se(e,t)},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(i,{type:"primary",ghost:"",loading:t.uploadLoading,class:"g-mr-12"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.$t("upload")),1)]),_:2},1032,["loading"])]),_:2},1032,["file-list","onUpdate:file-list","accept","action","disabled","onChange"])):Object(l["createCommentVNode"])("",!0),t.isSuccess||t.fileName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:1,class:Object(l["normalizeClass"])(["config-value auth-filename",{"view-active":!!t.fileUrl}]),onClick:e=>ue(t.fileUrl),title:t.fileName},Object(l["toDisplayString"])(t.fileName),11,R)):Object(l["createCommentVNode"])("",!0)]),_:2},1032,["label"]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createVNode"])(a,null,{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("p",M,Object(l["toDisplayString"])(e.$t("properties")),1)]),_:1}),Object(l["createVNode"])(a,null,{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(k,{propertiesObj:K.properties,isEdit:Object(l["unref"])(p),ref_key:"propertiesRef",ref:h},null,8,["propertiesObj","isEdit"])]),_:1})]),_:1},8,["model"])])]),Object(l["unref"])(p)?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",A,[Object(l["createVNode"])(i,{type:"primary",onClick:ne,class:"save-btn g-mr-12"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.$t("save")),1)]),_:1}),Object(l["createVNode"])(i,{onClick:re},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.$t("cancel")),1)]),_:1})])):Object(l["createCommentVNode"])("",!0),Object(l["unref"])(p)?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",F,[Object(l["createVNode"])(i,{type:"primary",onClick:ae,class:"edit-btn g-mr-12"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.$t("edit")),1)]),_:1}),Object(l["createVNode"])(i,{onClick:ce,class:"remove-btn"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.$t("remove")),1)]),_:1})])),m.value?(Object(l["openBlock"])(),Object(l["createBlock"])(y,{key:2})):Object(l["createCommentVNode"])("",!0)])}}}),G=(a("f84a"),a("f07d"),a("6b0d")),q=a.n(G);const K=q()(z,[["__scopeId","data-v-03332876"]]);var X=K;const H={class:"catalogs-wrap g-flex"},J={class:"catalog-list-left"},W={class:"catalog-header"},Z={key:0,class:"catalog-list"},Q=["onClick"],Y=Object(l["createTextVNode"])("+"),ee={class:"catalog-detail"};var te=Object(l["defineComponent"])({__name:"index",setup(e){const{t:t}=Object(s["b"])(),a=Object(y["e"])(),r=Object(y["d"])(),i=Object(l["reactive"])([]),u=Object(l["reactive"])({}),d=Object(l["ref"])(!1),b="new catalog",p=Object(l["ref"])(!1),f=o["a"].PRESENTED_IMAGE_SIMPLE;async function O(){try{p.value=!0;const e=await Object(n["a"])();i.length=0,(e||[]).forEach(e=>{i.push({catalogName:e.catalogName,catalogType:e.catalogType})})}finally{p.value=!1}}function j(){const{catalogname:e="",type:t}=r.query,a={};if(decodeURIComponent(e)!==b){var c,o;if(e)a.catalogName=e,a.catalogType=t;else a.catalogName=null===(c=i[0])||void 0===c?void 0:c.catalogName,a.catalogType=null===(o=i[0])||void 0===o?void 0:o.catalogType;m(a)}else k()}function g(e){d.value?E(()=>{m(e),d.value=!1,v(!1)}):m(e)}function m(e){const{catalogName:t,catalogType:c}=e;u.catalogName=t,u.catalogType=c,a.replace({path:"/catalogs",query:{catalogname:encodeURIComponent(u.catalogName),type:u.catalogType}})}async function v(e,t){var a,c;(d.value=e,t)&&(await h(),null!==t&&void 0!==t&&t.catalogName||(t.catalogName=null===(a=i[0])||void 0===a?void 0:a.catalogName,t.catalogType=null===(c=i[0])||void 0===c?void 0:c.catalogType));const o=i.findIndex(e=>e.catalogName===b);if(o>-1){var l,n;i.splice(o);const e={catalogName:null===(l=i[0])||void 0===l?void 0:l.catalogName,catalogType:null===(n=i[0])||void 0===n?void 0:n.catalogType};m(e)}else t&&m(t)}async function h(){await O()}function k(){d.value?E(()=>{C()}):C()}function C(){const e={catalogName:b,catalogType:""};i.push(e),m(e),d.value=!0}function E(e){c["a"].confirm({title:t("leavePageModalTitle"),content:t("leavePageModalContent"),okText:t("leave"),onOk:async()=>{e&&await e()}})}return Object(l["onMounted"])(async()=>{await O(),j()}),Object(y["c"])((e,t,a)=>{d.value?E(()=>{a()}):a()}),(e,t)=>{const a=Object(l["resolveComponent"])("a-button"),c=Object(l["resolveComponent"])("a-empty");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",H,[Object(l["createElementVNode"])("div",J,[Object(l["createElementVNode"])("div",W,Object(l["toDisplayString"])(`${e.$t("catalog")} ${e.$t("list")}`),1),i.length&&!p.value?(Object(l["openBlock"])(),Object(l["createElementBlock"])("ul",Z,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(i,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e.catalogName,class:Object(l["normalizeClass"])(["catalog-item g-text-nowrap",{active:e.catalogName===u.catalogName}]),onClick:t=>g(e)},Object(l["toDisplayString"])(e.catalogName),11,Q))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createVNode"])(a,{onClick:k,disabled:u.catalogName===b,class:"add-btn"},{default:Object(l["withCtx"])(()=>[Y]),_:1},8,["disabled"])]),Object(l["createElementVNode"])("div",ee,[i.length||p.value?(Object(l["openBlock"])(),Object(l["createBlock"])(X,{key:1,isEdit:d.value,onUpdateEdit:v,onUpdateCatalogs:h},null,8,["isEdit"])):(Object(l["openBlock"])(),Object(l["createBlock"])(c,{key:0,image:Object(l["unref"])(f),class:"detail-empty"},null,8,["image"]))])])}}});a("69b2");const ae=q()(te,[["__scopeId","data-v-4673984e"]]);t["default"]=ae},c411:function(e,t,a){},caad:function(e,t,a){"use strict";var c=a("23e7"),o=a("4d64").includes,l=a("d039"),n=a("44d22"),r=l((function(){return!Array(1).includes()}));c({target:"Array",proto:!0,forced:r},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n("includes")},df75:function(e,t,a){var c=a("ca84"),o=a("7839");e.exports=Object.keys||function(e){return c(e,o)}},f07d:function(e,t,a){"use strict";a("4ed8")},f84a:function(e,t,a){"use strict";a("37f0")}}]);