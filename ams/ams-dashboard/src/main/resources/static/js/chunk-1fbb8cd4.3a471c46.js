(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fbb8cd4"],{"01f6":function(e,t,a){"use strict";a("b4ed")},1148:function(e,t,a){"use strict";var n=a("da84"),c=a("5926"),i=a("577e"),r=a("1d80"),o=n.RangeError;e.exports=function(e){var t=i(r(this)),a="",n=c(e);if(n<0||n==1/0)throw o("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(a+=t);return a}},"14db":function(e,t,a){},"25f0":function(e,t,a){"use strict";var n=a("e330"),c=a("5e77").PROPER,i=a("6eeb"),r=a("825a"),o=a("3a9b"),l=a("577e"),u=a("d039"),s=a("ad6d"),b="toString",d=RegExp.prototype,f=d[b],p=n(s),O=u((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),j=c&&f.name!=b;(O||j)&&i(RegExp.prototype,b,(function(){var e=r(this),t=l(e.source),a=e.flags,n=l(void 0===a&&o(d,e)&&!("flags"in d)?p(e):a);return"/"+t+"/"+n}),{unsafe:!0})},"2c3e":function(e,t,a){var n=a("da84"),c=a("83ab"),i=a("9f7f").MISSED_STICKY,r=a("c6b6"),o=a("9bf2").f,l=a("69f3").get,u=RegExp.prototype,s=n.TypeError;c&&i&&o(u,"sticky",{configurable:!0,get:function(){if(this!==u){if("RegExp"===r(this))return!!l(this).sticky;throw s("Incompatible receiver, RegExp required")}}})},4005:function(e,t,a){},"408a":function(e,t,a){var n=a("e330");e.exports=n(1..valueOf)},"46e5":function(e,t,a){},"4d63":function(e,t,a){var n=a("83ab"),c=a("da84"),i=a("e330"),r=a("94ca"),o=a("7156"),l=a("9112"),u=a("9bf2").f,s=a("241c").f,b=a("3a9b"),d=a("44e7"),f=a("577e"),p=a("ad6d"),O=a("9f7f"),j=a("6eeb"),m=a("d039"),v=a("1a2d"),g=a("69f3").enforce,h=a("2626"),y=a("b622"),x=a("fce3"),k=a("107c"),w=y("match"),S=c.RegExp,C=S.prototype,I=c.SyntaxError,N=i(p),T=i(C.exec),z=i("".charAt),E=i("".replace),V=i("".indexOf),B=i("".slice),M=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,R=/a/g,D=/a/g,_=new S(R)!==R,F=O.MISSED_STICKY,K=O.UNSUPPORTED_Y,P=n&&(!_||F||x||k||m((function(){return D[w]=!1,S(R)!=R||S(D)==D||"/a/i"!=S(R,"i")}))),L=function(e){for(var t,a=e.length,n=0,c="",i=!1;n<=a;n++)t=z(e,n),"\\"!==t?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),c+=t):c+="[\\s\\S]":c+=t+z(e,++n);return c},$=function(e){for(var t,a=e.length,n=0,c="",i=[],r={},o=!1,l=!1,u=0,s="";n<=a;n++){if(t=z(e,n),"\\"===t)t+=z(e,++n);else if("]"===t)o=!1;else if(!o)switch(!0){case"["===t:o=!0;break;case"("===t:T(M,B(e,n+1))&&(n+=2,l=!0),c+=t,u++;continue;case">"===t&&l:if(""===s||v(r,s))throw new I("Invalid capture group name");r[s]=!0,i[i.length]=[s,u],l=!1,s="";continue}l?s+=t:c+=t}return[c,i]};if(r("RegExp",P)){for(var A=function(e,t){var a,n,c,i,r,u,s=b(C,this),p=d(e),O=void 0===t,j=[],m=e;if(!s&&p&&O&&e.constructor===A)return e;if((p||b(C,e))&&(e=e.source,O&&(t="flags"in m?m.flags:N(m))),e=void 0===e?"":f(e),t=void 0===t?"":f(t),m=e,x&&"dotAll"in R&&(n=!!t&&V(t,"s")>-1,n&&(t=E(t,/s/g,""))),a=t,F&&"sticky"in R&&(c=!!t&&V(t,"y")>-1,c&&K&&(t=E(t,/y/g,""))),k&&(i=$(e),e=i[0],j=i[1]),r=o(S(e,t),s?this:C,A),(n||c||j.length)&&(u=g(r),n&&(u.dotAll=!0,u.raw=A(L(e),a)),c&&(u.sticky=!0),j.length&&(u.groups=j)),e!==m)try{l(r,"source",""===m?"(?:)":m)}catch(v){}return r},U=function(e){e in A||u(A,e,{configurable:!0,get:function(){return S[e]},set:function(t){S[e]=t}})},q=s(S),H=0;q.length>H;)U(q[H++]);C.constructor=A,A.prototype=C,j(c,"RegExp",A)}h("RegExp")},5738:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return i})),a.d(t,"h",(function(){return r})),a.d(t,"g",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return u})),a.d(t,"i",(function(){return s})),a.d(t,"c",(function(){return b})),a.d(t,"d",(function(){return d}));a("99af");var n=a("b32d");function c(){return n["a"].get("ams/v1/catalogs")}function i(e){return n["a"].get("ams/v1/catalogs/".concat(e,"/databases"))}function r(e){var t=e.catalog,a=e.db;return n["a"].get("ams/v1/catalogs/".concat(t,"/databases/").concat(a,"/tables"))}function o(e){var t=e.catalog,a=void 0===t?"":t,c=e.db,i=void 0===c?"":c,r=e.table,o=void 0===r?"":r;return n["a"].get("ams/v1/tables/catalogs/".concat(a,"/dbs/").concat(i,"/tables/").concat(o,"/details"))}function l(e){var t=e.catalog,a=e.db,c=e.table,i=e.page,r=e.pageSize;return n["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(a,"/tables/").concat(c,"/partitions"),{params:{page:i,pageSize:r}})}function u(e){var t=e.catalog,a=e.db,c=e.table,i=e.partition,r=e.page,o=e.pageSize;return n["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(a,"/tables/").concat(c,"/partitions/").concat(i,"/files"),{params:{page:r,pageSize:o}})}function s(e){var t=e.catalog,a=e.db,c=e.table,i=e.page,r=e.pageSize;return n["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(a,"/tables/").concat(c,"/transactions"),{params:{page:i,pageSize:r}})}function b(e){var t=e.catalog,a=e.db,c=e.table,i=e.transactionId,r=e.page,o=e.pageSize;return n["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(a,"/tables/").concat(c,"/transactions/").concat(i,"/detail"),{params:{page:r,pageSize:o}})}function d(e){var t=e.catalog,a=e.db,c=e.table,i=e.page,r=e.pageSize;return n["a"].get("ams/v1/tables/catalogs/".concat(t,"/dbs/").concat(a,"/tables/").concat(c,"/optimize"),{params:{page:i,pageSize:r}})}},"77f6":function(e,t,a){"use strict";a("a294")},a15b:function(e,t,a){"use strict";var n=a("23e7"),c=a("e330"),i=a("44ad"),r=a("fc6a"),o=a("a640"),l=c([].join),u=i!=Object,s=o("join",",");n({target:"Array",proto:!0,forced:u||!s},{join:function(e){return l(r(this),void 0===e?",":e)}})},a294:function(e,t,a){},a7ba:function(e,t,a){"use strict";a("4005")},b356:function(e,t,a){"use strict";function n(){var e=0,t=1,a=["25","50","100"],n=25;return{total:e,current:t,pageSize:n,pageSizeOptions:a,showQuickJumper:!0,showSizeChanger:!0,hideOnSinglePage:!1}}a.d(t,"a",(function(){return n}))},b4ed:function(e,t,a){},b680:function(e,t,a){"use strict";var n=a("23e7"),c=a("da84"),i=a("e330"),r=a("5926"),o=a("408a"),l=a("1148"),u=a("d039"),s=c.RangeError,b=c.String,d=Math.floor,f=i(l),p=i("".slice),O=i(1..toFixed),j=function(e,t,a){return 0===t?a:t%2===1?j(e,t-1,a*e):j(e*e,t/2,a)},m=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},v=function(e,t,a){var n=-1,c=a;while(++n<6)c+=t*e[n],e[n]=c%1e7,c=d(c/1e7)},g=function(e,t){var a=6,n=0;while(--a>=0)n+=e[a],e[a]=d(n/t),n=n%t*1e7},h=function(e){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==e[t]){var n=b(e[t]);a=""===a?n:a+f("0",7-n.length)+n}return a},y=u((function(){return"0.000"!==O(8e-5,3)||"1"!==O(.9,0)||"1.25"!==O(1.255,2)||"1000000000000000128"!==O(0xde0b6b3a7640080,0)}))||!u((function(){O({})}));n({target:"Number",proto:!0,forced:y},{toFixed:function(e){var t,a,n,c,i=o(this),l=r(e),u=[0,0,0,0,0,0],d="",O="0";if(l<0||l>20)throw s("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return b(i);if(i<0&&(d="-",i=-i),i>1e-21)if(t=m(i*j(2,69,1))-69,a=t<0?i*j(2,-t,1):i/j(2,t,1),a*=4503599627370496,t=52-t,t>0){v(u,0,a),n=l;while(n>=7)v(u,1e7,0),n-=7;v(u,j(10,n,1),0),n=t-1;while(n>=23)g(u,1<<23),n-=23;g(u,1<<n),v(u,1,1),g(u,2),O=h(u)}else v(u,0,a),v(u,1<<-t,0),O=h(u)+f("0",l);return l>0?(c=O.length,O=d+(c<=l?"0."+f("0",l-c)+O:p(O,0,c-l)+"."+p(O,c-l))):O=d+O,O}})},bab7:function(e,t,a){"use strict";a("46e5")},bfa3:function(e,t,a){"use strict";a.r(t);a("99af");var n=a("7a23"),c={class:"tables-wrap"},i={key:0,class:"tables-content"},r={class:"g-flex-jsb"},o={class:"g-flex-col"},l={class:"g-flex"},u={class:"table-name g-text-nowrap"},s={class:"create-time"},b={class:"table-info g-flex-ac"},d={class:"text-color"},f={class:"text-color"},p={class:"text-color"},O={class:"content"};function j(e,t,a,j,m,v){var g=Object(n["resolveComponent"])("a-divider"),h=Object(n["resolveComponent"])("u-details"),y=Object(n["resolveComponent"])("a-tab-pane"),x=Object(n["resolveComponent"])("u-files"),k=Object(n["resolveComponent"])("a-tabs"),w=Object(n["resolveComponent"])("router-view");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[e.isSecondaryNav?(Object(n["openBlock"])(),Object(n["createBlock"])(w,{key:1,onGoBack:e.goBack},null,8,["onGoBack"])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",i,[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("span",u,Object(n["toDisplayString"])(e.baseInfo.tableName),1),Object(n["createElementVNode"])("span",s,Object(n["toDisplayString"])("".concat(e.$t("createTime"),": ").concat(e.baseInfo.createTime)),1)]),Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("p",null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])("".concat(e.$t("table")).concat(e.$t("size")))+": ",1),Object(n["createElementVNode"])("span",d,Object(n["toDisplayString"])(e.baseInfo.size),1)]),Object(n["createVNode"])(g,{type:"vertical"}),Object(n["createElementVNode"])("p",null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("file"))+": ",1),Object(n["createElementVNode"])("span",f,Object(n["toDisplayString"])(e.baseInfo.file),1)]),Object(n["createVNode"])(g,{type:"vertical"}),Object(n["createElementVNode"])("p",null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("averageFileSize"))+": ",1),Object(n["createElementVNode"])("span",p,Object(n["toDisplayString"])(e.baseInfo.averageFile),1)])])])]),Object(n["createElementVNode"])("div",O,[Object(n["createVNode"])(k,{activeKey:e.activeKey,"onUpdate:activeKey":t[0]||(t[0]=function(t){return e.activeKey=t}),destroyInactiveTabPane:""},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(y,{key:"Details",tab:"Details"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{onSetBaseDetailInfo:e.setBaseDetailInfo},null,8,["onSetBaseDetailInfo"])]})),_:1}),Object(n["createVNode"])(y,{key:"Files",tab:"Files"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(x,{hasPartition:e.baseInfo.hasPartition},null,8,["hasPartition"])]})),_:1}),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.tabConfigs,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(y,{key:e.key,tab:"".concat(e.key)},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(),Object(n["createBlock"])(Object(n["resolveDynamicComponent"])("U".concat(e.key))))]})),_:2},1032,["tab"])})),128))]})),_:1},8,["activeKey"])])]))])}var m=a("5530"),v=a("1da1"),g=(a("96cf"),a("4de4"),a("d3b7"),a("d81d"),a("b64b"),a("47e2")),h=a("6c02"),y=a("5738"),x=a("d257"),k={class:"table-detail g-flex"},w={class:"left-content"},S={key:0,class:"table-attrs"},C={class:"attr-title"},I={key:1,class:"table-attrs"},N={class:"attr-title"},T={class:"table-attrs"},z={class:"attr-title"},E={class:"right-content"},V={key:0,class:"table-attrs"},B={class:"attr-title"},M={class:"table-attrs"},R={class:"attr-title"},D={class:"table-attrs"},_={class:"attr-title"},F=Object(n["defineComponent"])({emits:["setBaseDetailInfo"],setup:function(e,t){var a=t.emit,c=Object(g["b"])(),i=c.t,r=Object(h["c"])(),o=Object(n["computed"])((function(){return Object(m["a"])({},r.query)}));Object(n["watch"])((function(){return r.query}),(function(e){(null===e||void 0===e?void 0:e.catalog)&&s()}));var l={averageFile:"Average File Size",file:"File",lastCommitTime:"Last Commit Time",size:"Size",maxEventTime:"Max Event Time"},u=Object(n["reactive"])({detailLoading:!1,baseDetailInfo:{tableName:"",createTime:"",size:"",file:"",averageFile:"",hasPartition:!1},pkList:[],partitionColumnList:[],properties:[],changeMetrics:[],baseMetrics:[],schema:[]}),s=function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,n,c,i,r,s,b,d,f,p,O,j,v,g,h,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(k=function(){a("setBaseDetailInfo",u.baseDetailInfo)},e.prev=1,t=o.value,n=t.catalog,c=t.db,i=t.table,n&&c&&i){e.next=5;break}return e.abrupt("return");case 5:return u.detailLoading=!0,e.next=8,Object(y["g"])(Object(m["a"])({},o.value));case 8:r=e.sent,s=r.pkList,b=void 0===s?[]:s,d=r.partitionColumnList,f=void 0===d?[]:d,p=r.properties,O=r.changeMetrics,j=r.schema,v=r.createTime,g=r.tableIdentifier,h=r.baseMetrics,u.baseDetailInfo=Object(m["a"])(Object(m["a"])({},h),{},{tableName:(null===g||void 0===g?void 0:g.tableName)||"",createTime:v?Object(x["b"])(v):"",hasPartition:!!f.length}),u.pkList=b||[],u.partitionColumnList=f||[],u.schema=j||[],u.changeMetrics=Object.keys(l||{}).map((function(e){return{metric:l[e],value:"lastCommitTime"===e?(O||{})[e]?Object(x["b"])((O||{})[e]):"":(O||{})[e]}})).filter((function(e){return e.value})),u.baseMetrics=Object.keys(l||{}).map((function(e){return{metric:l[e],value:"lastCommitTime"===e?(h||{})[e]?Object(x["b"])((h||{})[e]):"":(h||{})[e]}})),u.properties=Object.keys(p||{}).map((function(e){return{key:e,value:p[e]}})),k(),e.next=22;break;case 20:e.prev=20,e.t0=e["catch"](1);case 22:return e.prev=22,u.detailLoading=!1,e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,20,22,25]])})));return function(){return e.apply(this,arguments)}}();Object(n["onMounted"])((function(){s()}));var b=Object(n["shallowReactive"])([{title:i("field"),dataIndex:"field",width:"30%"},{title:i("type"),dataIndex:"type",width:"30%"},{title:i("description"),dataIndex:"comment",ellipsis:!0}]),d=Object(n["shallowReactive"])([{title:i("field"),dataIndex:"field",width:"30%"},{title:i("sourceField"),dataIndex:"sourceField",width:"30%"},{title:i("transform"),dataIndex:"transform",ellipsis:!0}]),f=Object(n["shallowReactive"])([{title:i("metric"),dataIndex:"metric",width:"50%",ellipsis:!0},{title:i("value"),dataIndex:"value",ellipsis:!0}]),p=Object(n["shallowReactive"])([{title:i("key"),dataIndex:"key",width:"50%",ellipsis:!0},{title:i("value"),dataIndex:"value",ellipsis:!0}]);return function(e,t){var a=Object(n["resolveComponent"])("a-table"),c=Object(n["resolveComponent"])("u-loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",k,[Object(n["createElementVNode"])("div",w,[Object(n["unref"])(u).pkList&&Object(n["unref"])(u).pkList.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",S,[Object(n["createElementVNode"])("p",C,Object(n["toDisplayString"])(e.$t("primaryKey")),1),Object(n["createVNode"])(a,{rowKey:"field",columns:Object(n["unref"])(b),"data-source":Object(n["unref"])(u).pkList,pagination:!1},null,8,["columns","data-source"])])):Object(n["createCommentVNode"])("",!0),Object(n["unref"])(u).partitionColumnList&&Object(n["unref"])(u).partitionColumnList.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",I,[Object(n["createElementVNode"])("p",N,Object(n["toDisplayString"])(e.$t("partitionKey")),1),Object(n["createVNode"])(a,{rowKey:"field",columns:Object(n["unref"])(d),"data-source":Object(n["unref"])(u).partitionColumnList,pagination:!1},null,8,["columns","data-source"])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",T,[Object(n["createElementVNode"])("p",z,Object(n["toDisplayString"])(e.$t("schema")),1),Object(n["createVNode"])(a,{rowKey:"field",columns:Object(n["unref"])(b),"data-source":Object(n["unref"])(u).schema,pagination:!1},null,8,["columns","data-source"])])]),Object(n["createElementVNode"])("div",E,[Object(n["unref"])(u).changeMetrics&&Object(n["unref"])(u).changeMetrics.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",V,[Object(n["createElementVNode"])("p",B,Object(n["toDisplayString"])(e.$t("changeTableMetrics")),1),Object(n["createVNode"])(a,{columns:Object(n["unref"])(f),"data-source":Object(n["unref"])(u).changeMetrics,pagination:!1},null,8,["columns","data-source"])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",M,[Object(n["createElementVNode"])("p",R,Object(n["toDisplayString"])(e.$t("baseTableMetrics")),1),Object(n["createVNode"])(a,{columns:Object(n["unref"])(f),"data-source":Object(n["unref"])(u).baseMetrics,pagination:!1},null,8,["columns","data-source"])]),Object(n["createElementVNode"])("div",D,[Object(n["createElementVNode"])("p",_,Object(n["toDisplayString"])(e.$t("properties")),1),Object(n["createVNode"])(a,{columns:Object(n["unref"])(p),"data-source":Object(n["unref"])(u).properties,pagination:!1},null,8,["columns","data-source"])])]),Object(n["unref"])(u).detailLoading?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0})):Object(n["createCommentVNode"])("",!0)])}}}),K=(a("77f6"),a("6b0d")),P=a.n(K);const L=P()(F,[["__scopeId","data-v-e4085d4c"]]);var $=L,A=(a("159b"),a("b356")),U={class:"table-partitons"},q=Object(n["createTextVNode"])("All"),H=Object(n["defineComponent"])({props:{hasPartition:{type:Boolean}},setup:function(e){var t=e,a=Object(n["ref"])(!1),c=Object(g["b"])(),i=c.t,r=Object(n["shallowReactive"])([{title:i("partition"),dataIndex:"partition",ellipsis:!0},{title:i("fileCount"),dataIndex:"fileCount",width:120,ellipsis:!0},{title:i("size"),dataIndex:"size",width:120,ellipsis:!0},{title:i("lastCommitTime"),dataIndex:"lastCommitTime",width:200,ellipsis:!0}]),o=Object(n["shallowReactive"])([{title:i("file"),dataIndex:"file",ellipsis:!0},{title:i("type"),dataIndex:"fileType",width:120,ellipsis:!0},{title:i("size"),dataIndex:"size",width:120,ellipsis:!0},{title:i("commitTime"),dataIndex:"commitTime",width:200,ellipsis:!0},{title:i("commitId"),dataIndex:"commitId",width:200,ellipsis:!0},{title:i("path"),dataIndex:"path",ellipsis:!0}]),l=Object(n["reactive"])([]),u=Object(n["reactive"])([]),s=Object(n["ref"])(""),b=Object(n["ref"])(!1),d=Object(n["reactive"])(Object(A["a"])()),f=Object(n["reactive"])(Object(A["a"])()),p=Object(h["c"])(),O=p.query,j=Object(n["reactive"])(Object(m["a"])({catalog:"",db:"",table:""},O));function k(){return w.apply(this,arguments)}function w(){return w=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,b.value=!0,l.length=0,e.next=5,Object(y["f"])(Object(m["a"])(Object(m["a"])({},j),{},{page:d.current,pageSize:d.pageSize}));case 5:t=e.sent,a=t.list,n=t.total,d.total=n,(a||[]).forEach((function(e){e.lastCommitTime=e.lastCommitTime?Object(x["b"])(e.lastCommitTime):"",l.push(e)})),e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](0);case 13:return e.prev=13,b.value=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,11,13,16]])}))),w.apply(this,arguments)}function S(e){var n=e.current,c=void 0===n?1:n,i=e.pageSize,r=void 0===i?25:i;!a.value&&t.hasPartition?(d.current=c,r!==d.pageSize&&(d.current=1),d.pageSize=r):(f.current=c,r!==f.pageSize&&(f.current=1),f.pageSize=r),C()}function C(){t.hasPartition?a.value?I():k():I()}function I(){return N.apply(this,arguments)}function N(){return N=Object(v["a"])(regeneratorRuntime.mark((function e(){var a,n,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,u.length=0,b.value=!0,a=Object(m["a"])(Object(m["a"])({},j),{},{partition:t.hasPartition?encodeURIComponent(s.value):null,page:f.current,pageSize:f.pageSize}),e.next=6,Object(y["e"])(a);case 6:n=e.sent,c=n.list,i=n.total,f.total=i,(c||[]).forEach((function(e){e.commitTime=e.commitTime?Object(x["b"])(e.commitTime):"",u.push(e)})),e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](0);case 14:return e.prev=14,b.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,12,14,17]])}))),N.apply(this,arguments)}function T(e){s.value=e.partition,a.value=!a.value,a.value&&(f.current=1,I())}return Object(n["onMounted"])((function(){a.value=!1,t.hasPartition?k():I()})),function(t,c){var i=Object(n["resolveComponent"])("a-button"),p=Object(n["resolveComponent"])("a-table"),O=Object(n["resolveComponent"])("a-breadcrumb-item"),j=Object(n["resolveComponent"])("a-breadcrumb");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",U,[!a.value&&e.hasPartition?(Object(n["openBlock"])(),Object(n["createBlock"])(p,{key:0,rowKey:"partiton",columns:Object(n["unref"])(r),"data-source":Object(n["unref"])(l),pagination:Object(n["unref"])(d),onChange:S,loading:b.value},{bodyCell:Object(n["withCtx"])((function(e){var t=e.column,a=e.record;return["partition"===t.dataIndex?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:0,type:"link",onClick:function(e){return T(a)}},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(a.partition),1)]})),_:2},1032,["onClick"])):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["columns","data-source","pagination","loading"])):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[e.hasPartition?(Object(n["openBlock"])(),Object(n["createBlock"])(j,{key:0,separator:">"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{onClick:T,class:"text-active"},{default:Object(n["withCtx"])((function(){return[q]})),_:1}),Object(n["createVNode"])(O,null,{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])("".concat(t.$t("partition")," ").concat(s.value)),1)]})),_:1})]})),_:1})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(p,{rowKey:"file",columns:Object(n["unref"])(o),"data-source":Object(n["unref"])(u),pagination:Object(n["unref"])(f),onChange:S,class:"g-mt-8",loading:b.value},null,8,["columns","data-source","pagination","loading"])],64))])}}});a("cfc5");const G=P()(H,[["__scopeId","data-v-549b17d6"]]);var Y=G,J={class:"table-transactions"},Q=Object(n["createTextVNode"])("All"),W=Object(n["defineComponent"])({setup:function(e){var t=Object(n["ref"])(!1),a=Object(g["b"])(),c=a.t,i=Object(n["shallowReactive"])([{title:c("transactionId"),dataIndex:"transactionId",ellipsis:!0},{title:c("fileCount"),dataIndex:"fileCount"},{title:c("size"),dataIndex:"fileSize"},{title:c("commitTime"),dataIndex:"commitTime"},{title:c("snapshotId"),dataIndex:"snapshotId",ellipsis:!0}]),r=Object(n["shallowReactive"])([{title:c("file"),dataIndex:"file",ellipsis:!0},{title:c("partition"),dataIndex:"partition",width:120},{title:c("fileType"),dataIndex:"type",width:120},{title:c("size"),dataIndex:"size",width:120},{title:c("commitTime"),dataIndex:"commitTime",width:200,ellipsis:!0},{title:c("path"),dataIndex:"path",ellipsis:!0}]),o=Object(n["reactive"])([]),l=Object(n["reactive"])([]),u=Object(n["ref"])(""),s=Object(n["ref"])(!1),b=Object(n["reactive"])(Object(A["a"])()),d=Object(n["reactive"])(Object(A["a"])()),f=Object(h["c"])(),p=f.query,O=Object(n["reactive"])(Object(m["a"])({catalog:"",db:"",table:""},p));function j(){return k.apply(this,arguments)}function k(){return k=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,a,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s.value=!0,o.length=0,e.next=5,Object(y["i"])(Object(m["a"])(Object(m["a"])({},O),{},{page:b.current,pageSize:b.pageSize}));case 5:t=e.sent,a=t.list,n=void 0===a?[]:a,c=t.total,n.forEach((function(e){e.commitTime=e.commitTime?Object(x["b"])(e.commitTime):"",o.push(e)})),b.total=c,e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](0);case 13:return e.prev=13,s.value=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,11,13,16]])}))),k.apply(this,arguments)}function w(e){var a=e.current,n=void 0===a?1:a,c=e.pageSize,i=void 0===c?25:c;t.value?(d.current=n,i!==d.pageSize&&(d.current=1),d.pageSize=i):(b.current=n,i!==b.pageSize&&(b.current=1),b.pageSize=i),S()}function S(){t.value?C():j()}function C(){return I.apply(this,arguments)}function I(){return I=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,a,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,l.length=0,s.value=!0,t=Object(m["a"])(Object(m["a"])({},O),{},{transactionId:u.value,page:d.current,pageSize:d.pageSize}),e.next=6,Object(y["c"])(t);case 6:a=e.sent,n=a.list,c=a.total,d.total=c,n.forEach((function(e){e.commitTime=e.commitTime?Object(x["b"])(e.commitTime):"",l.push(e)})),e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](0);case 14:return e.prev=14,s.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,12,14,17]])}))),I.apply(this,arguments)}function N(e){u.value=e.transactionId,t.value=!t.value,t.value&&(d.current=1,C())}return Object(n["onMounted"])((function(){t.value=!1,j()})),function(e,a){var c=Object(n["resolveComponent"])("a-button"),s=Object(n["resolveComponent"])("a-table"),f=Object(n["resolveComponent"])("a-breadcrumb-item"),p=Object(n["resolveComponent"])("a-breadcrumb");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",J,[t.value?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createVNode"])(p,{separator:">"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{onClick:N,class:"text-active"},{default:Object(n["withCtx"])((function(){return[Q]})),_:1}),Object(n["createVNode"])(f,null,{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])("".concat(e.$t("transactionId")," ").concat(u.value)),1)]})),_:1})]})),_:1}),Object(n["createVNode"])(s,{rowKey:"file",columns:Object(n["unref"])(r),"data-source":Object(n["unref"])(l),pagination:Object(n["unref"])(d),class:"g-mt-8"},null,8,["columns","data-source","pagination"])],64)):(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0,rowKey:"id",columns:Object(n["unref"])(i),"data-source":Object(n["unref"])(o),pagination:Object(n["unref"])(b),onChange:w},{bodyCell:Object(n["withCtx"])((function(e){var t=e.column,a=e.record;return["transactionId"===t.dataIndex?(Object(n["openBlock"])(),Object(n["createBlock"])(c,{key:0,type:"link",onClick:function(e){return N(a)}},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(a.transactionId),1)]})),_:2},1032,["onClick"])):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["columns","data-source","pagination"]))])}}});a("a7ba");const X=P()(W,[["__scopeId","data-v-72ba818a"]]);var Z=X,ee=a("2909"),te={class:"table-optinize"},ae=Object(n["defineComponent"])({setup:function(e){var t=Object(g["b"])(),a=t.t,c=Object(n["shallowReactive"])([{title:a("startTime"),dataIndex:"startTime"},{title:a("duration"),dataIndex:"duration"},{title:a("input"),children:[{title:a("count"),dataIndex:"inputCount"},{title:a("size"),dataIndex:"inputSize"}]},{title:a("output"),children:[{title:a("count"),dataIndex:"outputCount"},{title:a("size"),dataIndex:"outputSize"}]}]),i=Object(n["reactive"])([]),r=Object(n["ref"])(!1),o=Object(n["reactive"])(Object(A["a"])()),l=Object(h["c"])(),u=l.query,s=Object(n["reactive"])(Object(m["a"])({catalog:"",db:"",table:""},u));function b(){return d.apply(this,arguments)}function d(){return d=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,a,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r.value=!0,i.length=0,e.next=5,Object(y["d"])(Object(m["a"])(Object(m["a"])({},s),{},{page:o.current,pageSize:o.pageSize}));case 5:t=e.sent,a=t.list,n=t.total,c=void 0===n?0:n,o.total=c,i.push.apply(i,Object(ee["a"])(Object(ee["a"])(a||[]).map((function(e){var t=e.recordId,a=e.totalFilesStatBeforeCompact,n=e.totalFilesStatAfterCompact;return{recordId:t,startTime:e.commitTime?Object(x["b"])(e.commitTime):"",duration:Object(x["e"])(e.duration||0),inputCount:null===a||void 0===a?void 0:a.fileCnt,inputSize:Object(x["a"])(null===a||void 0===a?void 0:a.totalSize),outputCount:null===n||void 0===n?void 0:n.fileCnt,outputSize:Object(x["a"])(null===n||void 0===n?void 0:n.totalSize)}})))),e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](0);case 13:return e.prev=13,r.value=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,11,13,16]])}))),d.apply(this,arguments)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=e.current,a=void 0===t?1:t,n=e.pageSize,c=void 0===n?25:n;o.current=a,c!==o.pageSize&&(o.current=1),o.pageSize=c,b()}return Object(n["onMounted"])((function(){b()})),function(e,t){var a=Object(n["resolveComponent"])("a-table");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",te,[Object(n["createVNode"])(a,{rowKey:"recordId",columns:Object(n["unref"])(c),"data-source":Object(n["unref"])(i),pagination:Object(n["unref"])(o),onChange:f,loading:r.value},null,8,["columns","data-source","pagination","loading"])])}}});a("01f6");const ne=P()(ae,[["__scopeId","data-v-6509548c"]]);var ce=ne,ie=a("0613"),re=Object(n["defineComponent"])({name:"Tables",components:{UDetails:$,UFiles:Y,UTransactions:Z,UOptimized:ce},setup:function(){var e=Object(h["d"])(),t=Object(h["c"])(),a=Object(ie["a"])(),c=Object(n["shallowReactive"])([{key:"Transactions"},{key:"Optimized"}]),i=Object(n["reactive"])({activeKey:"Details",isSecondaryNav:!1,baseInfo:{tableName:"",createTime:"",size:"",file:"",averageFile:"",hasPartition:!1}}),r=function(e){i.baseInfo=Object(m["a"])({},e)},o=function(){},l=function(){},u=function(){a.updateTablesMenu(!1)},s=function(){i.isSecondaryNav=!1,e.back()};return Object(n["watch"])((function(){return t.path}),(function(){i.isSecondaryNav=!!(t.path.indexOf("create")>-1)}),{immediate:!0}),Object(n["watch"])((function(){return t.query}),(function(){i.activeKey="Details"})),Object(m["a"])(Object(m["a"])({},Object(n["toRefs"])(i)),{},{tabConfigs:c,store:a,editTable:o,delTable:l,setBaseDetailInfo:r,hideTablesMenu:u,goBack:s})}});a("bab7");const oe=P()(re,[["render",j],["__scopeId","data-v-63a8a5c8"]]);t["default"]=oe},c607:function(e,t,a){var n=a("da84"),c=a("83ab"),i=a("fce3"),r=a("c6b6"),o=a("9bf2").f,l=a("69f3").get,u=RegExp.prototype,s=n.TypeError;c&&i&&o(u,"dotAll",{configurable:!0,get:function(){if(this!==u){if("RegExp"===r(this))return!!l(this).dotAll;throw s("Incompatible receiver, RegExp required")}}})},cfc5:function(e,t,a){"use strict";a("14db")},d257:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return l}));a("b680"),a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("25f0"),a("a15b"),a("b64b"),a("5319");var n=function(e){if(0===e)return"0";if(null===e||void 0===e)return"未知";var t=1024;return e<t?e+"B":e<Math.pow(t,2)?(e/t).toFixed(2)+"KB":e<Math.pow(t,3)?(e/Math.pow(t,2)).toFixed(2)+"MB":e<Math.pow(t,4)?(e/Math.pow(t,3)).toFixed(2)+"G":(e/Math.pow(t,4)).toFixed(2)+"T"},c=function(e){if(0===e)return"0";var t=1024;return e<t?e+"MB":e<Math.pow(t,2)?(e/t).toFixed(2)+"G":(e/Math.pow(t,2)).toFixed(2)+"T"},i=function e(t,a){if(null===t||void 0===t||isNaN(t))return"";var n=1e3,c=60*n,i=60*c,r=24*i;if(0===t)return"0 ms";if(t<n)return(a?"0 min ":"")+"".concat(t," ms");if(t>=n&&t<c){var o=Math.floor(t/n);return(a?"0 min ":"")+(o?o+" s":"")}if(t>=c&&t<i){var l=Math.floor(t/c),u=Math.floor((t-l*c)/n);return t%c===0?t/c+" min":l+" min "+(u?u+" s":"")}if(t%i===0)return t/i+" h";if(t>=i&&t<r){var s=Math.floor(t/i);return s+" h "+e(t-s*i,!0)}if(t%r===0)return t/r+" d";var b=Math.floor(t/r);return b+" d "+e(t-b*r,!0)},r=function(e){if(null===e||void 0===e||isNaN(e))return"";var t=1e3,a=60*t,n=60*a,c=24*n;return 0===e?"0 ms":e<=n?"".concat(Math.floor(e/t)," s"):e>n&&e<=c?"".concat(Math.floor(e/a)," min"):e>c&&e<=30*c?"".concat(Math.floor(e/n)," h"):">30 d"},o=function(){var e=function(e){var t=e||"";return t.length<2?"0".concat(t):t},t={yyyy:function(e){return e.getFullYear()},MM:function(t){return e(String(t.getMonth()+1))},dd:function(t){return e(String(t.getDate()))},HH:function(t){return e(String(t.getHours()))},mm:function(t){return e(String(t.getMinutes()))},ss:function(t){return e(String(t.getSeconds()))}},a=new RegExp(Object.keys(t).join("|"),"g");return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd  HH:mm:ss";if(!e)return"";var c=+e;return c=new Date(c),n.replace(a,(function(e){return t[e](c)}))}}();function l(e){var t,a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var c=arguments.length,i=new Array(c),r=0;r<c;r++)i[r]=arguments[r];clearTimeout(t),t=setTimeout((function(){e.apply(a,i)}),n)}}}}]);